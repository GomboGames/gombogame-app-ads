<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Bahadır Kuş – Simulation Developer & Technical Designer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg: #f3f4f6;
      --card-bg: #ffffff;
      --text: #111827;
      --muted: #6b7280;
      --border: #e5e7eb;
      --accent: #2563eb;
      --accent-soft: #eff6ff;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #e5f0ff 0, #f3f4f6 40%, #f3f4f6 100%);
      color: var(--text);
      line-height: 1.6;
    }

    a { color: inherit; text-decoration: none; }

    .page {
      max-width: 1180px;
      margin: 0 auto;
      padding: 32px 16px 64px;
    }

    .layout {
      display: grid;
      grid-template-columns: 290px minmax(0, 1fr);
      gap: 24px;
      align-items: flex-start;
    }

    /* LEFT PROFILE CARD */
    .sidebar {
      position: sticky;
      top: 24px;
      align-self: flex-start;
      background: #111827;
      border-radius: 24px;
      padding: 26px 22px 22px;
      box-shadow: 0 26px 60px rgba(15, 23, 42, 0.45);
      display: flex;
      flex-direction: column;
      gap: 18px;
      color: #f9fafb;
      align-items: center;
    }

    .profile-header {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .profile-photo {
      width: 140px;
      height: 140px;
      border-radius: 32px;
      background: #020617;
      border: 1px solid rgba(148, 163, 184, 0.6);
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: #9ca3af;
    }

    .profile-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .profile-name {
      font-size: 22px;
      font-weight: 600;
      letter-spacing: 0.02em;
    }

    .profile-role-pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 6px 18px;
      background: #27272f;
      border-radius: 999px;
      font-size: 12px;
      color: #e5e7eb;
      letter-spacing: 0.06em;
      text-transform: none;
      box-shadow: 0 10px 28px rgba(15, 23, 42, 0.7);
    }

    .profile-role-pill-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
    }

    .profile-bio {
      font-size: 13px;
      color: #e5e7eb;
      text-align: left;
      align-self: stretch;
    }

    /* SOCIAL BUTTONS */
    .profile-social {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 2px;
    }

    .social-btn {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      background: rgba(255,255,255,0.06);
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      transition: .2s;
    }

    .social-btn img {
      width: 16px;
      height: 16px;
      display: block;
    }

    .social-btn:hover {
      background: #fff;
      border-color: var(--accent);
      transform: translateY(-1px);
      box-shadow: 0 10px 20px rgba(15,23,42,0.4);
    }

    /* CONTACT CARDS */
    .contact-list {
      align-self: stretch;
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 8px;
      font-size: 13px;
    }

    .contact-card,
    .contact-card-link {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 11px;
      border-radius: 16px;
      background: #15151f;
      box-shadow: 0 12px 24px rgba(0,0,0,0.45);
    }

    .contact-card-link {
      text-decoration: none;
      color: #e5e7eb;
      transition: .15s;
    }

    .contact-card-link:hover {
      background: #1e1e29;
      transform: translateY(-1px);
      box-shadow: 0 16px 30px rgba(0,0,0,0.6);
    }

    .contact-icon {
      width: 36px;
      height: 36px;
      border-radius: 14px;
      background: #0f172a;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 26px rgba(0,0,0,0.7);
      flex-shrink: 0;
    }

    .contact-icon img {
      width: 18px;
      height: 18px;
      display: block;
    }

    .contact-text {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .contact-label {
      font-size: 11px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #9ca3af;
    }

    .contact-value {
      font-size: 13px;
      color: #e5e7eb;
      word-break: break-all;
    }

    /* MAIN CARD (RIGHT) */
    .main-card {
      background: #fff;
      border-radius: 24px;
      box-shadow: 0 24px 60px rgba(15, 23, 42, 0.18);
      padding: 18px 20px 22px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .main-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border);
      padding-bottom: 8px;
      gap: 12px;
    }

    .main-header h1 {
      font-size: 19px;
      font-weight: 600;
      letter-spacing: 0.02em;
    }

    .main-header p {
      font-size: 13px;
      color: var(--muted);
      margin-top: 2px;
    }

    .top-tabs {
      display: flex;
      background: #f3f4f6;
      padding: 3px;
      border-radius: 999px;
      gap: 3px;
    }

    .tab-btn {
      padding: 6px 16px;
      border-radius: 999px;
      font-size: 13px;
      border: none;
      background: none;
      cursor: pointer;
      color: var(--muted);
      white-space: nowrap;
      transition: 0.15s;
    }

    .tab-btn.active {
      background: #fff;
      color: var(--text);
      font-weight: 500;
      box-shadow: 0 6px 18px rgba(148,163,184,0.5);
    }

    .tab-section { display: none; }
    .tab-section.active { display: block; }

    section h2 {
      font-size: 16px;
      margin-bottom: 4px;
    }

    section p {
      font-size: 14px;
      color: var(--muted);
    }

    /* FILTERS */
    .project-filters {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 12px 0 16px;
    }

    .filter-btn {
      border-radius: 999px;
      padding: 6px 13px;
      font-size: 12px;
      border: 1px solid var(--border);
      background: #f9fafb;
      cursor: pointer;
      opacity: 0.9;
      transition: background 0.15s ease, opacity 0.1s ease,
                  transform 0.1s ease, box-shadow 0.1s ease, border-color 0.1s ease;
    }

    .filter-btn:hover {
      background: #e5e7eb;
      opacity: 1;
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(148, 163, 184, 0.6);
    }

    .filter-btn.active {
      border-color: var(--accent);
      background: var(--accent-soft);
      color: #1d4ed8;
      opacity: 1;
      box-shadow: 0 8px 20px rgba(129, 140, 248, 0.4);
    }

    /* PROJECT GRID */
    .projects-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(360px, 1fr));
      gap: 18px;
      margin-top: 4px;
    }

    .project-card {
      display: flex;
      background: #f9fafb;
      border-radius: 18px;
      box-shadow: 0 12px 30px rgba(15,23,42,0.12);
      overflow: hidden;
      cursor: pointer;
      transition: .15s;
      min-height: 190px;
    }

    .project-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 22px 45px rgba(15,23,42,0.22);
      background: #ffffff;
    }

    .project-text {
      padding: 18px 20px 18px 22px;
      flex: 1;
      position: relative;
    }

    .project-text::before {
      content: "";
      position: absolute;
      left: 0;
      top: 16px;
      bottom: 16px;
      width: 4px;
      border-radius: 999px;
      background: var(--accent);
    }

    .project-tagline {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      opacity: 0.6;
      margin-bottom: 3px;
      color: #4b5563;
    }

    .project-title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 1px;
    }

    .project-role {
      font-size: 12px;
      font-weight: 500;
      color: var(--muted);
      margin-bottom: 2px;
    }

    .project-date {
      font-size: 11px;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .project-desc {
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 4px;
    }

    .project-more {
      font-size: 12px;
      text-decoration: underline;
      text-underline-offset: 2px;
      color: #1d4ed8;
      margin-top: 4px;
      display: inline-block;
    }

    .project-image {
      width: 38%;
      background: #e5e7eb;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .project-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .project-image span {
      font-size: 12px;
      color: var(--muted);
    }

    /* RESUME BLOCKS */
    .resume-block {
      background: #f9fafb;
      border-radius: 16px;
      padding: 14px 16px 14px;
      box-shadow: 0 12px 28px rgba(15, 23, 42, 0.12);
      margin-top: 12px;
      font-size: 14px;
      color: var(--muted);
    }

    .resume-block h3 {
      font-size: 15px;
      margin-bottom: 4px;
      color: var(--text);
    }

    footer {
      margin-top: 28px;
      font-size: 12px;
      color: var(--muted);
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 8px;
      opacity: 0.85;
    }

    /* MODAL */
    .project-modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.55);
      display: none;
      justify-content: center;
      align-items: center;
      padding: 16px;
      z-index: 100;
    }

    .project-modal.open { display: flex; }

    .project-modal-content {
      background: #fff;
      border-radius: 20px;
      max-width: 980px;
      width: 100%;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      box-shadow: 0 30px 70px rgba(15,23,42,0.4);
    }

    .project-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 18px 24px 10px;
      border-bottom: 1px solid var(--border);
    }

    .project-modal-title {
      font-size: 18px;
      font-weight: 600;
    }

    .project-modal-sub {
      font-size: 12px;
      color: var(--muted);
      margin-top: 2px;
    }

    .project-modal-close {
      border: none;
      background: transparent;
      font-size: 22px;
      cursor: pointer;
      line-height: 1;
      padding: 4px 8px;
    }

    .project-modal-body {
      display: flex;
      gap: 24px;
      padding: 20px 24px 22px;
      flex-wrap: wrap;
    }

    .modal-text {
      flex: 1 1 280px;
      font-size: 14px;
      color: var(--muted);
    }

    .modal-text h4 {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      margin-bottom: 6px;
      opacity: 0.7;
    }

    .modal-desc {
      margin-bottom: 10px;
    }

    .modal-links {
      margin-top: 6px;
    }

    .modal-links-title {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      margin-bottom: 4px;
      color: #4b5563;
    }

    .modal-link {
      margin-bottom: 6px;
    }

    .modal-link-label {
      font-size: 13px;
      font-weight: 500;
      color: #111827;
    }

    .modal-link a {
      font-size: 13px;
      color: #2563eb;
      word-break: break-all;
      text-decoration: underline;
      text-underline-offset: 2px;
    }

    .modal-gallery {
      flex: 1 1 320px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .modal-main-media {
      width: 100%;
      background: #f3f4f6;
      border-radius: 14px;
      min-height: 220px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .modal-main-media img,
    .modal-main-media video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .modal-main-media iframe {
      width: 100%;
      height: 100%;
      border: 0;
      display: block;
    }

    .modal-main-media span {
      font-size: 12px;
      color: var(--muted);
    }

    .modal-thumbs {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .modal-thumb {
      width: 70px;
      height: 70px;
      border-radius: 10px;
      overflow: hidden;
      background: #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: 2px solid transparent;
      font-size: 11px;
      color: var(--muted);
    }

    .modal-thumb img,
    .modal-thumb video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .modal-thumb.active {
      border-color: var(--accent);
    }

    /* MOBILE */
    @media (max-width: 900px) {
      .layout {
        grid-template-columns: 1fr;
      }

      .sidebar {
        position: static;
      }
    }

    @media (max-width: 640px) {
      .projects-grid {
        grid-template-columns: 1fr;
      }

      .project-card {
        flex-direction: column;
      }

      .project-image {
        width: 100%;
        min-height: 150px;
      }

      .project-text {
        padding: 14px 16px 14px 20px;
      }

      .project-text::before {
        top: 12px;
        bottom: 12px;
      }

      .project-modal-body {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

<div class="page">
  <div class="layout">
    <!-- LEFT PROFILE -->
    <aside class="sidebar">
      <div class="profile-header">
        <div class="profile-photo">
          <!-- Your profile photo: images/profile.jpg -->
          <img src="images/profile.jpg" alt="Bahadır Kuş">
        </div>
        <div class="profile-name">Bahadır Kuş</div>
        <div class="profile-role-pill">
          <span class="profile-role-pill-dot"></span>
          <span>Simulation Developer &amp; Technical Designer</span>
        </div>
      </div>

      <!-- SHORT BIO -->
      <p class="profile-bio">
        Developer focused on real-time simulation, Unity and VR/AR.
      </p>

      <!-- Social icons -->
      <div class="profile-social">
        <a class="social-btn" href="#" target="_blank" title="Instagram">
          <img src="images/icon-instagram.svg" alt="Instagram">
        </a>
        <a class="social-btn" href="#" target="_blank" title="X / Twitter">
          <img src="images/icon-x.svg" alt="X">
        </a>
        <a class="social-btn" href="#" target="_blank" title="LinkedIn">
          <img src="images/icon-linkedin.svg" alt="LinkedIn">
        </a>
      </div>

      <!-- Contact cards -->
      <div class="contact-list">
        <a class="contact-card-link" href="mailto:example@mail.com">
          <div class="contact-icon">
            <img src="images/icon-email.svg" alt="Email icon">
          </div>
          <div class="contact-text">
            <span class="contact-label">Email</span>
            <span class="contact-value">example@mail.com</span>
          </div>
        </a>

        <a class="contact-card-link" href="#" target="_blank">
          <div class="contact-icon">
            <img src="images/icon-game.svg" alt="Game demo icon">
          </div>
          <div class="contact-text">
            <span class="contact-label">Demo / GitHub</span>
            <span class="contact-value">Project link</span>
          </div>
        </a>

        <div class="contact-card">
          <div class="contact-icon">
            <img src="images/icon-location.svg" alt="Location icon">
          </div>
          <div class="contact-text">
            <span class="contact-label">Location</span>
            <span class="contact-value">Toronto, Canada</span>
          </div>
        </div>

        <a class="contact-card-link" href="#" target="_blank">
          <div class="contact-icon">
            <img src="images/icon-youtube.svg" alt="YouTube icon">
          </div>
          <div class="contact-text">
            <span class="contact-label">YouTube</span>
            <span class="contact-value">YouTube channel</span>
          </div>
        </a>
      </div>
    </aside>

    <!-- MAIN CARD -->
    <main class="main-card">
      <div class="main-header">
        <div>
          <h1>Portfolio &amp; Resume</h1>
          <p>Selected work in simulation, software and design.</p>
        </div>
        <div class="top-tabs">
          <button class="tab-btn active" data-tab="portfolio">Portfolio</button>
          <button class="tab-btn" data-tab="resume">Resume</button>
        </div>
      </div>

      <!-- PORTFOLIO -->
      <section id="portfolio-section" class="tab-section active">
        <h2>Portfolio</h2>
        <p>Some of the projects I’ve worked on. Use the filters to switch categories.</p>

        <div class="project-filters">
          <button class="filter-btn active" data-filter="all">All</button>
          <button class="filter-btn" data-filter="software">Software</button>
          <button class="filter-btn" data-filter="design">Design</button>
          <button class="filter-btn" data-filter="hardware">Hardware</button>
        </div>

        <div class="projects-grid">
          <!-- Cards will be injected by JS -->
        </div>
      </section>

      <!-- RESUME -->
      <section id="resume-section" class="tab-section">
        <h2>Resume</h2>
        <p>An overview of my skills, background and professional experience.</p>

        <div class="resume-block" style="margin-top:10px;">
          <h3>My Skills</h3>
          <p><!-- Fill later --></p>
        </div>

        <div class="resume-block">
          <h3>About Me</h3>
          <p>
            I’m Bahadır. I started with IT and web technologies and gradually focused on
            real-time applications and simulation development. Since 2021 I’ve been working
            on VR/AR-based medical simulations, combining my own mechanical designs,
            sensors and software infrastructure to build realistic surgical training systems.<br><br>
            Turning complex processes into functional tools is what motivates me. My goal is
            to create reliable, innovative simulation experiences that blend digital and
            physical components.
          </p>
        </div>

        <div class="resume-block">
          <h3>Professional Experience</h3>
          <p><!-- Fill later --></p>
        </div>
      </section>
    </main>
  </div>

  <footer>
    <span>© <span id="year"></span> Bahadır Kuş</span>
    <span>Simulation Developer &amp; Technical Designer</span>
  </footer>
</div>

<!-- PROJECT MODAL -->
<div class="project-modal" id="project-modal">
  <div class="project-modal-content">
    <div class="project-modal-header">
      <div>
        <div class="project-modal-title" id="modal-title"></div>
        <div class="project-modal-sub" id="modal-sub"></div>
      </div>
      <button class="project-modal-close" id="modal-close" aria-label="Close">×</button>
    </div>
    <div class="project-modal-body">
      <div class="modal-text">
        <h4>Project Details</h4>
        <p class="modal-desc" id="modal-desc"></p>
        <div class="modal-links" id="modal-links"></div>
      </div>
      <div class="modal-gallery">
        <div class="modal-main-media" id="modal-main-media">
          <span>No media has been added yet.</span>
        </div>
        <div class="modal-thumbs" id="modal-thumbs"></div>
      </div>
    </div>
  </div>
</div>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();

  // TAB SWITCHING
  const tabButtons = document.querySelectorAll('.tab-btn');
  const tabSections = document.querySelectorAll('.tab-section');

  tabButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const tab = btn.dataset.tab;
      tabButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      tabSections.forEach(sec => {
        sec.classList.remove('active');
        if (sec.id === tab + '-section') {
          sec.classList.add('active');
        }
      });
    });
  });

  // --- PROJECTS ---
  // projects array is defined in projects.js and loaded before this script.

  const projectsGrid = document.querySelector('.projects-grid');
  const filterButtons = document.querySelectorAll('.filter-btn');
  let activeFilter = 'all';

  function getYouTubeId(url) {
    if (!url) return null;
    const vMatch = url.match(/[?&]v=([^&]+)/);
    if (vMatch && vMatch[1]) return vMatch[1];
    const beMatch = url.match(/youtu\.be\/([^?&]+)/);
    if (beMatch && beMatch[1]) return beMatch[1];
    return null;
  }

  function createProjectCard(project) {
    const card = document.createElement('article');
    card.className = 'project-card';
    card.dataset.id = project.id;
    card.dataset.types = (project.types || []).join(',');

    const hasCover = project.coverImage && project.coverImage.trim() !== '';
    const dateText = project.date ? `Date: ${project.date}` : '';
    const firstGalleryItem = (project.gallery && project.gallery[0]) ? project.gallery[0] : null;

    let mediaHtml = '<span>No image</span>';

    if (hasCover) {
      mediaHtml = `<img src="${project.coverImage}" alt="${project.name} cover" />`;
    } else if (firstGalleryItem && firstGalleryItem.type === 'image') {
      mediaHtml = `<img src="${firstGalleryItem.src}" alt="${firstGalleryItem.alt || (project.name + ' image')}" />`;
    } else if (firstGalleryItem && firstGalleryItem.type === 'youtube') {
      const ytId = getYouTubeId(firstGalleryItem.src);
      if (ytId) {
        mediaHtml = `<img src="https://img.youtube.com/vi/${ytId}/hqdefault.jpg" alt="${project.name} YouTube thumbnail" />`;
      }
    }

    card.innerHTML = `
      <div class="project-text">
        <div class="project-tagline">${project.tagline || ''}</div>
        <div class="project-title">${project.name}</div>
        <div class="project-role">${project.role || ''}</div>
        <div class="project-date">${dateText}</div>
        <p class="project-desc">${project.shortDesc || ''}</p>
        <span class="project-more">View details</span>
      </div>
      <div class="project-image">
        ${mediaHtml}
      </div>
    `;
    return card;
  }

  function renderProjects() {
    projectsGrid.innerHTML = '';
    (projects || []).forEach(project => {
      const types = project.types || [];
      if (activeFilter !== 'all' && !types.includes(activeFilter)) return;
      const card = createProjectCard(project);
      projectsGrid.appendChild(card);
    });
    attachCardEvents();
  }

  // MODAL ELEMENTS
  const modal = document.getElementById('project-modal');
  const modalTitle = document.getElementById('modal-title');
  const modalSub = document.getElementById('modal-sub');
  const modalDesc = document.getElementById('modal-desc');
  const modalLinks = document.getElementById('modal-links');
  const modalMainMedia = document.getElementById('modal-main-media');
  const modalThumbs = document.getElementById('modal-thumbs');
  const modalCloseBtn = document.getElementById('modal-close');

  function setMainMedia(item) {
    modalMainMedia.innerHTML = '';
    if (!item) {
      modalMainMedia.innerHTML = '<span>No media has been added yet.</span>';
      return;
    }

    if (item.type === 'image') {
      const img = document.createElement('img');
      img.src = item.src;
      img.alt = item.alt || '';
      modalMainMedia.appendChild(img);
      return;
    }

    if (item.type === 'video') {
      const vid = document.createElement('video');
      vid.src = item.src;
      vid.controls = true;
      modalMainMedia.appendChild(vid);
      return;
    }

    if (item.type === 'youtube') {
      const ytId = getYouTubeId(item.src);
      if (!ytId) {
        modalMainMedia.innerHTML = '<span>Invalid YouTube URL.</span>';
        return;
      }
      modalMainMedia.innerHTML = `
        <iframe
          src="https://www.youtube.com/embed/${ytId}"
          title="YouTube video player"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen
        ></iframe>
      `;
      return;
    }

    modalMainMedia.innerHTML = '<span>Unsupported media type.</span>';
  }

  function openModal(projectId) {
    const project = (projects || []).find(p => p.id === projectId);
    if (!project) return;

    modalTitle.textContent = project.name;

    const subParts = [];
    if (project.role) subParts.push(project.role);
    if (project.tagline) subParts.push(project.tagline);
    if (project.date) subParts.push(project.date);
    modalSub.textContent = subParts.join(' • ');

    modalDesc.textContent = project.longDesc || project.shortDesc || '';

    // Links
    modalLinks.innerHTML = '';
    if (project.links && project.links.length > 0) {
      const titleEl = document.createElement('div');
      titleEl.className = 'modal-links-title';
      titleEl.textContent = 'Links';
      modalLinks.appendChild(titleEl);

      project.links.forEach(link => {
        if (!link || !link.url) return;
        const wrap = document.createElement('div');
        wrap.className = 'modal-link';

        const label = document.createElement('div');
        label.className = 'modal-link-label';
        label.textContent = link.label || 'Link';

        const a = document.createElement('a');
        a.href = link.url;
        a.target = '_blank';
        a.rel = 'noopener noreferrer';
        a.textContent = link.url;

        wrap.appendChild(label);
        wrap.appendChild(a);
        modalLinks.appendChild(wrap);
      });
    }

    // Media
    modalMainMedia.innerHTML = '';
    modalThumbs.innerHTML = '';

    let gallery = Array.isArray(project.gallery) ? [...project.gallery] : [];

    // If gallery is empty but coverImage exists -> use it
    if (gallery.length === 0 && project.coverImage) {
      gallery = [{
        type: 'image',
        src: project.coverImage,
        alt: project.name + ' image'
      }];
    }

    if (gallery.length > 0) {
      setMainMedia(gallery[0]);

      gallery.forEach((item, index) => {
        const thumb = document.createElement('div');
        thumb.className = 'modal-thumb' + (index === 0 ? ' active' : '');
        thumb.dataset.index = index;

        if (item.type === 'image') {
          thumb.innerHTML = `<img src="${item.src}" alt="${item.alt || ''}">`;
        } else if (item.type === 'video') {
          thumb.innerHTML = `<span>Video</span>`;
        } else if (item.type === 'youtube') {
          const ytId = getYouTubeId(item.src);
          if (ytId) {
            const thumbUrl = `https://img.youtube.com/vi/${ytId}/hqdefault.jpg`;
            thumb.innerHTML = `<img src="${thumbUrl}" alt="YouTube video thumbnail">`;
          } else {
            thumb.textContent = 'YouTube';
          }
        } else {
          thumb.textContent = 'Media';
        }

        thumb.addEventListener('click', () => {
          document.querySelectorAll('.modal-thumb').forEach(t => t.classList.remove('active'));
          thumb.classList.add('active');
          setMainMedia(item);
        });

        modalThumbs.appendChild(thumb);
      });
    } else {
      modalMainMedia.innerHTML = '<span>No media has been added yet.</span>';
    }

    modal.classList.add('open');
  }

  function closeModal() {
    modal.classList.remove('open');
  }

  function attachCardEvents() {
    document.querySelectorAll('.project-card').forEach(card => {
      card.addEventListener('click', () => {
        const id = card.dataset.id;
        openModal(id);
      });
    });
  }

  filterButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      activeFilter = btn.dataset.filter;
      filterButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      renderProjects();
    });
  });

  modalCloseBtn.addEventListener('click', closeModal);
  modal.addEventListener('click', e => { if (e.target === modal) closeModal(); });
  document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

  renderProjects();
</script>

<!-- IMPORTANT: this must be loaded BEFORE the script above in reality,
     but since everything is inline here, in your real files put this line
     BEFORE the main script, or keep this tag and move the big script into
     a separate file. For now easiest is: create 'projects.js' next to index.html
     and keep this line below. -->
<script src="projects.js"></script>

</body>
</html>
