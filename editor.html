<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Project Editor – Bahadır</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f5;
      color: #111;
      padding: 24px 16px 64px;
    }

    .container {
      max-width: 960px;
      margin: 0 auto;
      background: #fff;
      border-radius: 16px;
      padding: 20px 20px 28px;
      box-shadow: 0 18px 40px rgba(15,23,42,0.08);
    }

    h1 {
      font-size: 22px;
      margin-bottom: 4px;
    }

    .sub { font-size: 13px; color: #666; margin-bottom: 16px; }

    form {
      border: 1px solid #e5e5e5;
      border-radius: 12px;
      padding: 16px 16px 10px;
      margin-bottom: 16px;
    }

    .field {
      margin-bottom: 10px;
    }

    .field label {
      display: block;
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 3px;
    }

    .field input[type="text"],
    .field textarea,
    .field input[type="date"] {
      width: 100%;
      padding: 6px 8px;
      border-radius: 6px;
      border: 1px solid #d4d4d4;
      font-size: 13px;
    }

    .field textarea {
      min-height: 60px;
      resize: vertical;
    }

    .chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      font-size: 13px;
    }

    .chips label {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid #d4d4d4;
      cursor: pointer;
      user-select: none;
    }

    .chips input { margin: 0; }

    .gallery-items {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 6px;
    }

    .gallery-item {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .gallery-item select,
    .gallery-item input {
      font-size: 12px;
      padding: 4px 6px;
      border-radius: 6px;
      border: 1px solid #d4d4d4;
    }

    .gallery-item input {
      flex: 1;
    }

    .btn {
      border-radius: 999px;
      padding: 7px 14px;
      font-size: 13px;
      border: 1px solid #d4d4d4;
      background: #fff;
      cursor: pointer;
      margin-top: 6px;
    }

    .btn-primary {
      border-color: #2962ff;
      background: #2962ff;
      color: #fff;
    }

    .btn-small {
      padding: 4px 10px;
      font-size: 12px;
    }

    .btn + .btn { margin-left: 6px; }

    .projects-list {
      margin-top: 16px;
      font-size: 13px;
    }

    .projects-list h2 {
      font-size: 16px;
      margin-bottom: 4px;
    }

    .projects-list ul {
      list-style: none;
      padding-left: 0;
      border-radius: 10px;
      border: 1px solid #e5e5e5;
      max-height: 220px;
      overflow-y: auto;
    }

    .projects-list li {
      padding: 6px 10px;
      border-bottom: 1px solid #f0f0f0;
      display: flex;
      justify-content: space-between;
      gap: 8px;
    }

    .projects-list li:last-child {
      border-bottom: none;
    }

    .projects-list span.date {
      color: #777;
      font-size: 12px;
    }

    .code-export {
      margin-top: 16px;
    }

    .code-export textarea {
      width: 100%;
      min-height: 180px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #d4d4d4;
      background: #0f172a;
      color: #e5e7eb;
      resize: vertical;
      white-space: pre;
    }

    .hint {
      font-size: 12px;
      color: #666;
      margin-top: 6px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Project Editor</h1>
    <div class="sub">
      This page is only for you. Fill the form → add project → copy the code below
      into <strong>projects.js</strong> (same folder as <strong>index.html</strong>).
    </div>

    <form id="project-form">
      <div class="field">
        <label>Title (name)</label>
        <input type="text" id="name" required />
      </div>

      <div class="field">
        <label>Role (role)</label>
        <input type="text" id="role" placeholder="Simulation Developer & Technical Designer" />
      </div>

      <div class="field">
        <label>Tagline</label>
        <input type="text" id="tagline" placeholder="VR • Medical Simulation" />
      </div>

      <div class="field">
        <label>Date</label>
        <input type="date" id="date" />
      </div>

      <div class="field">
        <label>Types (for filters)</label>
        <div class="chips">
          <label><input type="checkbox" value="software" /> Software</label>
          <label><input type="checkbox" value="design" /> Design</label>
          <label><input type="checkbox" value="hardware" /> Hardware</label>
          <label><input type="checkbox" value="simulation" /> Simulation</label>
        </div>
      </div>

      <div class="field">
        <label>Short Description (shortDesc)</label>
        <textarea id="shortDesc" placeholder="Shown on the card"></textarea>
      </div>

      <div class="field">
        <label>Long Description (longDesc)</label>
        <textarea id="longDesc" placeholder="Shown in the detail panel"></textarea>
      </div>

      <div class="field">
        <label>Card Cover Image (coverImage URL)</label>
        <input type="text" id="coverImage" placeholder="e.g. images/knee-cover.jpg" />
        <div class="hint">
          Add the file to your repo under <code>images/...</code> and write the path here.
          If empty, the first gallery item or YouTube thumbnail will be used.
        </div>
      </div>

      <div class="field">
        <label>Gallery (media for the detail panel)</label>
        <div class="gallery-items" id="gallery-items"></div>
        <button type="button" class="btn btn-small" id="add-gallery-item">
          + Add image / video / YouTube
        </button>
        <div class="hint">
          Each row: type + source + alt text.<br>
          Image: <code>images/...jpg</code> – Video: <code>videos/...mp4</code><br>
          YouTube: choose <strong>YouTube</strong> and paste the full link
          (<code>https://www.youtube.com/watch?v=XXXX</code>).
        </div>
      </div>

      <div class="field">
        <label>Links (optional)</label>
        <div class="hint">
          These links will be shown under the description in the detail panel.
        </div>
        <div style="margin-top:6px;">
          <div class="field">
            <label>Link 1 Label</label>
            <input type="text" id="link1Label" placeholder="e.g. Google Play" />
          </div>
          <div class="field">
            <label>Link 1 URL</label>
            <input type="text" id="link1Url" placeholder="https://..." />
          </div>
          <div class="field">
            <label>Link 2 Label</label>
            <input type="text" id="link2Label" placeholder="e.g. Demo Website" />
          </div>
          <div class="field">
            <label>Link 2 URL</label>
            <input type="text" id="link2Url" placeholder="https://..." />
          </div>
        </div>
      </div>

      <button type="submit" class="btn btn-primary">Add project</button>
      <button type="button" class="btn" id="clear-form">Clear form</button>
    </form>

    <div class="projects-list">
      <h2>Projects in this session</h2>
      <ul id="projects-list"></ul>
      <div class="hint">Order: from top to bottom as you add them.</div>
    </div>

    <div class="code-export">
      <h2>Code for <code>projects.js</code></h2>
      <textarea id="export-code" readonly></textarea>
      <div class="hint">
        Copy everything → paste into <strong>projects.js</strong> file.
      </div>
    </div>
  </div>

  <script>
    const form = document.getElementById('project-form');
    const galleryContainer = document.getElementById('gallery-items');
    const addGalleryBtn = document.getElementById('add-gallery-item');
    const projectsListEl = document.getElementById('projects-list');
    const exportCodeEl = document.getElementById('export-code');
    const clearFormBtn = document.getElementById('clear-form');

    let projects = [];

    function slugify(text) {
      return text
        .toString()
        .toLowerCase()
        .trim()
        .replace(/ğ/g, 'g')
        .replace(/ü/g, 'u')
        .replace(/ş/g, 's')
        .replace(/ı/g, 'i')
        .replace(/ö/g, 'o')
        .replace(/ç/g, 'c')
        .replace(/[^a-z0-9]+/g, '-')
        .replace(/^-+|-+$/g, '');
    }

    function addGalleryRow(type = 'image', src = '', alt = '') {
      const row = document.createElement('div');
      row.className = 'gallery-item';

      row.innerHTML = `
        <select class="gallery-type">
          <option value="image"${type === 'image' ? ' selected' : ''}>Image</option>
          <option value="video"${type === 'video' ? ' selected' : ''}>Video</option>
          <option value="youtube"${type === 'youtube' ? ' selected' : ''}>YouTube</option>
        </select>
        <input type="text" class="gallery-src" placeholder="images/..., videos/..., YouTube link" value="${src}" />
        <input type="text" class="gallery-alt" placeholder="Alt text / description" value="${alt}" />
        <button type="button" class="btn btn-small gallery-remove">Remove</button>
      `;

      row.querySelector('.gallery-remove').addEventListener('click', () => {
        row.remove();
      });

      galleryContainer.appendChild(row);
    }

    addGalleryBtn.addEventListener('click', () => addGalleryRow());

    clearFormBtn.addEventListener('click', () => {
      form.reset();
      galleryContainer.innerHTML = '';
    });

    function renderProjectsList() {
      projectsListEl.innerHTML = '';
      projects.forEach(p => {
        const li = document.createElement('li');
        li.innerHTML = `
          <span>${p.name}</span>
          <span class="date">${p.date || ''}</span>
        `;
        projectsListEl.appendChild(li);
      });
    }

    function updateExportCode() {
      const json = JSON.stringify(projects, null, 2);
      exportCodeEl.value = `const projects = ${json};`;
    }

    form.addEventListener('submit', e => {
      e.preventDefault();

      const name = document.getElementById('name').value.trim();
      if (!name) return;

      const role = document.getElementById('role').value.trim();
      const tagline = document.getElementById('tagline').value.trim();
      const date = document.getElementById('date').value;
      const shortDesc = document.getElementById('shortDesc').value.trim();
      const longDesc = document.getElementById('longDesc').value.trim();
      const coverImage = document.getElementById('coverImage').value.trim();

      const typeChecks = form.querySelectorAll('.chips input[type="checkbox"]');
      const types = [];
      typeChecks.forEach(ch => {
        if (ch.checked) types.push(ch.value);
      });

      const galleryItems = [];
      galleryContainer.querySelectorAll('.gallery-item').forEach(row => {
        const type = row.querySelector('.gallery-type').value;
        const src = row.querySelector('.gallery-src').value.trim();
        const alt = row.querySelector('.gallery-alt').value.trim();
        if (!src) return;
        galleryItems.push({ type, src, alt });
      });

      const link1Label = document.getElementById('link1Label').value.trim();
      const link1Url = document.getElementById('link1Url').value.trim();
      const link2Label = document.getElementById('link2Label').value.trim();
      const link2Url = document.getElementById('link2Url').value.trim();

      const links = [];
      if (link1Url) {
        links.push({ label: link1Label || 'Link 1', url: link1Url });
      }
      if (link2Url) {
        links.push({ label: link2Label || 'Link 2', url: link2Url });
      }

      const idBase = slugify(name);
      let id = idBase || 'project';
      let counter = 1;
      while (projects.some(p => p.id === id)) {
        id = `${idBase}-${counter++}`;
      }

      const project = {
        id,
        name,
        role,
        tagline,
        date,
        types,
        shortDesc,
        longDesc,
        coverImage,
        gallery: galleryItems,
        links
      };

      projects.push(project);
      renderProjectsList();
      updateExportCode();

      form.reset();
      galleryContainer.innerHTML = '';
    });
  </script>
</body>
</html>
